#
# SLURM configuration file for Sherlock
#

# =============================================================================
# Global options
#

#
# Daemons and timeouts
#
SlurmUser=slurm
StateSaveLocation=/var/spool/slurm.state
ReturnToService=2
SlurmdTimeout=900
SlurmctldTimeout=120
MessageTimeout=60
#MsgAggregationParams=WindowMsgs=10
PluginDir=/usr/lib64/slurm
# long timeout for killing jobs that tend to block in I/O
UnkillableStepTimeout=600
# use PAM so we can use polyinstantiated temp dirs, and systemd/XDG_* dirs
UsePAM=yes
LaunchParameters=slurmstepd_memlock_all,send_gids



#
# Logging (use syslog)
#
#DebugFlags=Route
SlurmctldSyslogDebug=info
SlurmdSyslogDebug=info

#
# Misc
#
# See http://bugs.schedmd.com/show_bug.cgi?id=732
#SallocDefaultCommand = "srun -n1 -N1 --mem-per-cpu=0 --pty --preserve-env $SHELL"
RebootProgram="/usr/local/sbin/slurm_reboot_node.sh"
MailProg=/usr/bin/smail

#
# MPI
#
MpiDefault=pmi2

#
# Resources and limits
#
MinJobAge=10
MaxJobCount=50000
GresTypes=gpu
PropagateResourceLimitsExcept=MEMLOCK,NOFILE,NPROC,AS,CPU
PrivateData=reservations,usage,users,accounts

#
# Prolog/Epilog
#
PrologSlurmctld=/etc/slurm/scripts/slurmctld_prolog.sh
#EpilogSlurmctld=/etc/slurm/scripts/slurmctld_epilog.sh
Prolog=/etc/slurm/scripts/prolog.sh
PrologFlags=contain
TaskProlog=/etc/slurm/scripts/taskprolog.sh
Epilog=/etc/slurm/scripts/epilog.sh

#
# Tracking and plugins
#
JobSubmitPlugins=lua,throttle
ProctrackType=proctrack/cgroup
TaskPlugin=task/cgroup
TopologyPlugin=topology/tree

#
# Scheduling
#
FastSchedule=1
SchedulerType=sched/backfill
#SchedulerParameters=bf_continue,bf_busy_nodes,bf_window=10080,bf_resolution=420,kill_invalid_depend,nohold_on_prolog_fail,pack_serial_at_end,preempt_youngest_first
#SchedulerParameters=default_queue_depth=10000,partition_job_depth=5000,bf_continue,bf_busy_nodes,bf_window=10080,bf_max_job_test=2000,bf_max_job_array_resv=5,bf_max_job_part=100,bf_max_job_user=10,kill_invalid_depend,nohold_on_prolog_fail,pack_serial_at_end,preempt_youngest_first,max_rpc_cnt=64
#SchedulerParameters=default_queue_depth=10000,partition_job_depth=5000,bf_continue,bf_busy_nodes,bf_interval=300,bf_window=10080,bf_max_job_test=5000,bf_max_job_array_resv=5,bf_max_job_part=1000,bf_max_job_user=100,bf_resolution=300,bf_min_prio_reserve=3000,bf_min_age_reserve=3600,kill_invalid_depend,nohold_on_prolog_fail,pack_serial_at_end,preempt_youngest_first,max_rpc_cnt=256,batch_sched_delay=10,sched_min_interval=5000000,build_queue_timeout=5000000

#SchedulerParameters=default_queue_depth=5000,partition_job_depth=2000,bf_continue,bf_yield_interval=1500000,bf_yield_sleep=750000,bf_busy_nodes,bf_interval=60,bf_max_time=120,bf_window=10080,bf_job_part_count_reserve=10,bf_max_job_test=5000,bf_max_job_array_resv=10,bf_max_job_user_part=100,bf_resolution=3600,bf_min_prio_reserve=3000,kill_invalid_depend,nohold_on_prolog_fail,pack_serial_at_end,preempt_youngest_first,reduce_completing_frag,batch_sched_delay=20,sched_min_interval=100000,build_queue_timeout=5000000,jobs_per_user_per_hour=2000,max_rpc_cnt=128,defer

SchedulerParameters=default_queue_depth=5000,partition_job_depth=2000,bf_continue,bf_yield_interval=1000000,bf_yield_sleep=750000,bf_busy_nodes,bf_interval=120,bf_max_time=240,bf_window=10080,bf_job_part_count_reserve=10,bf_max_job_test=10000,bf_max_job_array_resv=10,bf_max_job_user_part=100,bf_resolution=1800,bf_min_prio_reserve=3000,kill_invalid_depend,nohold_on_prolog_fail,pack_serial_at_end,preempt_youngest_first,reduce_completing_frag,batch_sched_delay=20,sched_min_interval=1000000,build_queue_timeout=5000000,jobs_per_user_per_hour=2000,max_rpc_cnt=256

#
# Resource selection
#
SelectType=select/cons_res
SelectTypeParameters=CR_Core_Memory

#
# FairShare
#
PriorityType=priority/multifactor
PriorityDecayHalfLife=7-0
PriorityMaxAge=14-0
PriorityWeightAge=1000
PriorityWeightFairshare=10000
# job size factor is between 0 and 1 (for full cluster), so the weight must be huge
PriorityWeightJobSize=50000000
PriorityWeightPartition=10000
PriorityWeightQOS=1000000
PriorityWeightTRES=CPU=5000,Mem=10000,GRES/gpu=25000
PriorityFlags=SMALL_RELATIVE_TO_TIME,FAIR_TREE,CALCULATE_RUNNING
FairShareDampeningFactor=5

#
# Preemption
#
PreemptMode=requeue
PreemptType=preempt/partition_prio

#
# Accounting
#
JobCompType=jobcomp/none
JobAcctGatherType=jobacct_gather/cgroup
JobAcctGatherFrequency=30
JobAcctGatherParams=UsePss
AccountingStorageType=accounting_storage/slurmdbd
AccountingStorageHost=sh-sl01
AccountingStorageBackupHost=sh-sl02
AccountingStorageEnforce=QOS,limits,safe
AccountingStorageTRES=gres/gpu,ic/ofed,fs/lustre
EnforcePartLimits=ANY
AcctGatherNodeFreq=300
# The IPMI plugin is too unreliable and error prone. It also can't discriminate
# energy usage per job, so it's pretty useless for us.
#AcctGatherEnergyType=acct_gather_energy/ipmi
AcctGatherEnergyType=acct_gather_energy/rapl
AcctGatherInfinibandType=acct_gather_infiniband/ofed
AcctGatherFilesystemType=acct_gather_filesystem/lustre

#
# Health check
#
HealthCheckProgram=/usr/sbin/nhc
HealthCheckInterval=600
# Only run health checks when the node has idle CPUs
HealthCheckNodeState=IDLE,MIXED,CYCLE



###############################################################################
# Specifics
#

# Cluster
ClusterName=sherlock
ControlMachine=sh-sl01
BackupController=sh-sl02
DefaultStorageType=slurmdbd


# -- Nodes --------------------------------------------------------------------

# >> Nodes features
#
# -- CPU features
#   * CPU_GEN: CPU generation: SNB|IVB|HSW|BDW|SKX|CNL
#   * CPU_SKU: CPU model     : E5-2640v2
#   * CPU_FRQ: CPU frequency : 2.60GHz
#
# -- GPU features
#   * GPU_GEN: GPU generation: KPL|MXW|PSC|VLT
#   * GPU_BRD: GPU brand     : GEFORCE|TESLA
#   * GPU_SKU: GPU model     : TITAN_{BLACK,X,Xp}|TESLA_{K{20,80},P40,P100}
#   * GPU_MEM: GPU memory    : 8GB
#   * GPU_CC:  GPU Compute Capability : 3.5|3.7|6.1

# >> Weights
#
# * Nodes with lower weight will be selected first.
# * Nodes with more memory or GRES are given a higher weight, so they're
#   selected last and saved for jobs that really need it
# * Nodes with more recent CPU generation will be selected first to give the
#   best performance
#
#   Weight mask: 1 | #GRES | Memory | #Cores | CPUgen | 1
#       prefix is to avoid octal conversion
#       suffix is to avoid having null weights
#
#   Values:
#       #GRES   none: 0   Memory   64 GB: 0   #Cores  16: 0  CPUgen  ???: 3
#              1 GPU: 1            96 GB: 1           20: 1          CNL: 4
#              2 GPU: 2           128 GB: 2           24: 2          SKX: 5
#              3 GPU: 3           192 GB: 3           28: 3          BDW: 6
#              4 GPU: 4           256 GB: 4           32: 4          HSW: 7
#              6 GPU: 5           384 GB: 5           48: 5          IVB: 8
#              8 GPU: 6           512 GB: 6           56: 6          SNB: 9
#             10 GPU: 7          1024 GB: 7
#             16 GPU: 8          1534 GB: 8
#                                3072 GB: 9

# Defaults
CpuFreqDef=Performance
NodeName=DEFAULT Sockets=2 State=UNKNOWN

# --- CPU nodes ---

# SNB | 32c | 1.5TB
NodeName=sh-02-[13-14] \
    Sockets=4 CoresPerSocket=8 \
    RealMemory=1536000 \
    Weight=108491 \
    Feature="CPU_GEN:SNB,CPU_SKU:E5-4640,CPU_FRQ:2.40GHz"

# IVB | 16c | 64GB
NodeName=sh-01-[01-26,32-34,36],sh-02-[01-12],sh-03-[02-36],sh-04-[01-36],sh-06-[01-36],sh-07-[22-24],sh-08-[02-11,27-29],sh-[10-12]-[01-36],sh-13-[01-22] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=64000 \
    Weight=100081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2650v2,CPU_FRQ:2.60GHz"

# IVB | 16c | 128GB
NodeName=sh-01-[27-31,35],sh-02-[15-34],sh-07-[02-21],sh-08-[12-14,17-26] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=128000 \
    Weight=102081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2650v2,CPU_FRQ:2.60GHz"

# IVB | 16c | 256GB
NodeName=sh-08-[01,15-16] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=256000 \
    Weight=104081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2650v2,CPU_FRQ:2.60GHz"

# HSW | 16c | 64GB
NodeName=sh-03-01,sh-07-[26-35],sh-08-[30-33],sh-13-[25-29],sh-17-[01-08,20-22],sh-18-[12-26],sh-20-[01-35],sh-[21-24]-[01-36],sh-25-[01-22,24-33],sh-26-[01-31],sh-27-[01-20,23-24],sh-30-[01-36],sh-31-[01-10] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=64000 \
    Weight=100071 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2640v3,CPU_FRQ:2.60GHz"

# HSW | 16c | 128GB
NodeName=sh-08-37,sh-17-[09-11,13-16],sh-18-[27-30],sh-27-[22,25-27,33-34],sh-28-[03,05-07] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=128000 \
    Weight=102071 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2640v3,CPU_FRQ:2.60GHz"

# HSW | 16c | 256GB
NodeName=sh-07-25,sh-08-[34-36],sh-17-[17-19],sh-18-[31-35],sh-26-[32-36],sh-27-[28-32],sh-28-[04,08-09] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=256000 \
    Weight=104071 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2640v3,CPU_FRQ:2.60GHz"

# HSW | 20c | 256GB
NodeName=sh-28-10 \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Weight=104171 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2660v3,CPU_FRQ:2.60GHz"

# HSW | 24c | 96GB
NodeName=sh-18-[01-10] \
    Sockets=2 CoresPerSocket=12 \
    RealMemory=96000 \
    Weight=101271 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2680v3,CPU_FRQ:2.50GHz"

# HSW | 28c | 128GB
NodeName=sh-18-11 \
    Sockets=2 CoresPerSocket=14 \
    RealMemory=128000 \
    Weight=102371 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2695v3,CPU_FRQ:2.30GHz"

# HSW | 32c | 256GB
NodeName=sh-17-[23-28] \
    Sockets=2 CoresPerSocket=16 \
    RealMemory=256000 \
    Weight=104471 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2698v3,CPU_FRQ:2.30GHz"

# HSW | 48c | 1.5TB
NodeName=sh-17-12,sh-25-23 \
    Sockets=4 CoresPerSocket=12 \
    RealMemory=1536000 \
    Weight=108571 \
    Feature="CPU_GEN:HSW,CPU_SKU:E7-4830v3,CPU_FRQ:2.10GHz"

# BDW | 20c | 128GB
NodeName=sh-101-[01-60,65-72],sh-102-[01-03,10-12,17-27,33-72],sh-103-[01-24],sh-104-[17-24,37-46,49-70],sh-105-[01-12,15-16,23-24,71-72] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=128000 \
    Weight=102161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz"

# BDW | 20c | 256GB
NodeName=sh-101-[61-64],sh-102-[04-08,13-16,28-32],sh-104-[01-16,25-36,47-48],sh-105-[13-14,17-22,25-28],sh-105-[29-64,69-70] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Weight=104161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz"

# BDW | 20c | 512GB
NodeName=sh-102-09,sh-104-[71-72],sh-105-[65-68] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=512000 \
    Weight=106161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz"

# BDW | 32c | 512GB
NodeName=sh-112-02,sh-113-09 \
    Sockets=2 CoresPerSocket=16 \
    RealMemory=512000 \
    Weight=106461 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2697Av4,CPU_FRQ:2.60GHz"

# BDW | 32c | 1.5TB
NodeName=sh-112-03 \
    Sockets=2 CoresPerSocket=16 \
    RealMemory=1536000 \
    Weight=108461 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2697Av4,CPU_FRQ:2.60GHz"

# BDW | 56c | 3TB
NodeName=sh-112-01 \
    Sockets=4 CoresPerSocket=14 \
    RealMemory=3072000 \
    Weight=109661 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-4650v4,CPU_FRQ:2.20GHz"

# SKX | 24c | 192GB
NodeName=sh-103-[25-36],sh-106-[01-36,53,55-72],sh-107-[01-20,23-26,29-56] \
    Sockets=2 CoresPerSocket=12 \
    RealMemory=191000 \ # short of 192000
    Weight=103251 \
    Feature="CPU_GEN:SKX,CPU_SKU:5118,CPU_FRQ:2.30GHz"

# SKX | 24c | 384GB
NodeName=sh-106-[37-52],sh-107-[21-22,27-28] \
    Sockets=2 CoresPerSocket=12 \
    RealMemory=384000 \
    Weight=105251 \
    Feature="CPU_GEN:SKX,CPU_SKU:5118,CPU_FRQ:2.30GHz"

# SKX | 24c | 512GB
NodeName=sh-106-54 \
    Sockets=2 CoresPerSocket=12 \
    RealMemory=512000 \
    Weight=106251 \
    Feature="CPU_GEN:SKX,CPU_SKU:5118,CPU_FRQ:2.30GHz"


# --- GPU nodes ---

# IVB | 16c | 64GB | 8x GeForce GTX TITAN Black
NodeName=sh-13-[23-24],sh-14-[01-09] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=64000 \
    Gres=gpu:8 \
    Weight=160081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2640v2,CPU_FRQ:2.00GHz,GPU_GEN:KPL,GPU_BRD:GEFORCE,GPU_SKU:TITAN_BLACK,GPU_MEM:6GB,GPU_CC:3.5"

# IVB | 16c | 256GB | 8x K20Xm
NodeName=sh-09-[01-02] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=256000 \
    Gres=gpu:8 \
    Weight=164081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2640v2,CPU_FRQ:2.00GHz,GPU_GEN:KPL,GPU_BRD:GEFORCE,GPU_SKU:K20X,GPU_MEM:6GB,GPU_CC:3.5"

# IVB | 16c | 256GB | 8x GeForce GTX TITAN Black
NodeName=sh-09-[03-05] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=256000 \
    Gres=gpu:8 \
    Weight=164081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2640v2,CPU_FRQ:2.00GHz,GPU_GEN:KPL,GPU_BRD:GEFORCE,GPU_SKU:TITAN_BLACK,GPU_MEM:6GB,GPU_CC:3.5"

# IVB | 16c | 64GB | 4x GeForce GTX TITAN Black -- E5-2640v2
NodeName=sh-09-06 \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=64000 \
    Gres=gpu:4 \
    Weight=140081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2640v2,CPU_FRQ:2.00GHz,GPU_GEN:KPL,GPU_BRD:GEFORCE,GPU_SKU:TITAN_BLACK,GPU_MEM:6GB,GPU_CC:3.5"

# IVB | 16c | 64GB | 4x GeForce GTX TITAN Black
NodeName=sh-09-[07-10] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=64000 \
    Gres=gpu:4 \
    Weight=140081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2650v2,CPU_FRQ:2.60GHz,GPU_GEN:KPL,GPU_BRD:GEFORCE,GPU_SKU:TITAN_BLACK,GPU_MEM:6GB,GPU_CC:3.5"

# IVB | 16c | 128GB | 8x GeForce GTX TITAN X
NodeName=sh-15-[01-08],sh-16-[01-08],sh-29-[01-08] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=128000 \
    Gres=gpu:8 \
    Weight=162081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2650v2,CPU_FRQ:2.60GHz,GPU_GEN:MXW,GPU_BRD:GEFORCE,GPU_SKU:TITAN_X,GPU_MEM:12GB,GPU_CC:5.2"

# IVB | 16c | 512GB | 8x GeForce GTX TITAN X
NodeName=sh-28-[01-02] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=512000 \
    Gres=gpu:8 \
    Weight=166081 \
    Feature="CPU_GEN:IVB,CPU_SKU:E5-2650v2,CPU_FRQ:2.60GHz,GPU_GEN:MXW,GPU_BRD:GEFORCE,GPU_SKU:TITAN_X,GPU_MEM:12GB,GPU_CC:5.2"

# HSW | 16c | 128GB | 8x GeForce GTX TITAN X
NodeName=sh-15-[09-10],sh-19-[01-08] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=128000 \
    Gres=gpu:8 \
    Weight=162071 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2640v3,CPU_FRQ:2.60GHz,GPU_GEN:MXW,GPU_BRD:GEFORCE,GPU_SKU:TITAN_X,GPU_MEM:12GB,GPU_CC:5.2"

# HSW | 16c | 128GB | 8x K80
NodeName=sh-27-21 \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=128000 \
    Gres=gpu:8 \
    Weight=162071 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2640v3,CPU_FRQ:2.60GHz,GPU_GEN:KPL,GPU_BRD:TESLA,GPU_SKU:K80,GPU_MEM:12GB,GPU_CC:3.7"

# HSW | 16c | 256GB | 8x K80
NodeName=sh-17-29,sh-27-35,sh-28-[11-12] \
    Sockets=2 CoresPerSocket=8 \
    RealMemory=256000 \
    Gres=gpu:8 \
    Weight=164071 \
    Feature="CPU_GEN:HSW,CPU_SKU:E5-2640v3,CPU_FRQ:2.60GHz,GPU_GEN:KPL,GPU_BRD:TESLA,GPU_SKU:K80,GPU_MEM:12GB,GPU_CC:3.7"

# BDW | 20c | 256GB | 4x P100-PCIe
NodeName=sh-112-04,sh-114-[05-06] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Gres=gpu:4 \
    Weight=144161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:TESLA,GPU_SKU:P100_PCIE,GPU_MEM:16GB,GPU_CC:6.0"

# BDW | 20c | 512GB | 4x P100-PCIe
NodeName=sh-112-[06-07] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=512000 \
    Gres=gpu:4 \
    Weight=146161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:TESLA,GPU_SKU:P100_PCIE,GPU_MEM:16GB,GPU_CC:6.0"

# BDW | 20c | 256GB | 4x P100-SXM2
NodeName=sh-114-[01-04] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Gres=gpu:4 \
    Weight=144161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:TESLA,GPU_SKU:P100_SXM2,GPU_MEM:16GB,GPU_CC:6.0"

# BDW | 20c | 256GB | 4x P40
NodeName=sh-112-05,sh-113-08 \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Gres=gpu:4 \
    Weight=144161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:TESLA,GPU_SKU:P40,GPU_MEM:24GB,GPU_CC:6.1"

# BDW | 20c | 128GB | 4x TITAN Xp
NodeName=sh-112-12,sh-113-[06-07],sh-114-[07-08],sh-113-15,sh-115-[07-08] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=128000 \
    Gres=gpu:4 \
    Weight=162161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:GEFORCE,GPU_SKU:TITAN_Xp,GPU_MEM:12GB,GPU_CC:6.1"

# BDW | 20c | 256GB | 4x TITAN Xp
NodeName=sh-115-[05-06] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Gres=gpu:4 \
    Weight=164161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:GEFORCE,GPU_SKU:TITAN_Xp,GPU_MEM:12GB,GPU_CC:6.1"

# BDW | 20c | 512GB | 4x TITAN Xp
NodeName=sh-112-[08-11],sh-113-[10-11],sh-114-[09,13-15],sh-115-04 \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=512000 \
    Gres=gpu:4 \
    Weight=166161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:GEFORCE,GPU_SKU:TITAN_Xp,GPU_MEM:12GB,GPU_CC:6.1"

# BDW | 20c | 1TB | 4x TITAN Xp
NodeName=sh-114-[10,12] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=1024000 \
    Gres=gpu:4 \
    Weight=167161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:GEFORCE,GPU_SKU:TITAN_Xp,GPU_MEM:12GB,GPU_CC:6.1"

# BDW | 20c | 256GB | 8x TITAN Xp
NodeName=sh-112-[13-17],sh-113-[01-05] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Gres=gpu:8 \
    Weight=184161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:GEFORCE,GPU_SKU:TITAN_Xp,GPU_MEM:12GB,GPU_CC:6.1"

# BDW | 20c | 512GB | 8x TITAN Xp
NodeName=sh-115-03 \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=512000 \
    Gres=gpu:8 \
    Weight=186161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:PSC,GPU_BRD:GEFORCE,GPU_SKU:TITAN_Xp,GPU_MEM:12GB,GPU_CC:6.1"

# BDW | 20c | 256GB | 4x V100-SXM2
NodeName=sh-113-[12-14],sh-114-11,sh-115-[01-02] \
    Sockets=2 CoresPerSocket=10 \
    RealMemory=256000 \
    Gres=gpu:4 \
    Weight=144161 \
    Feature="CPU_GEN:BDW,CPU_SKU:E5-2640v4,CPU_FRQ:2.40GHz,GPU_GEN:VLT,GPU_BRD:TESLA,GPU_SKU:V100_SXM2,GPU_MEM:16GB,GPU_CC:7.0"



# -- Partitions ---------------------------------------------------------------

# Notes:
# - MaxMemPerCPU is used to avoid a 1-CPU job using all the memory on a node
#   while being allocated only 1 CPU. MaxMemPerCPU will automatically upgrade
#   the number of cores allocated (ie. 16GB out of 64GB will allocate 4 cores)

# Defaults
PartitionName=DEFAULT AllocNodes=ALL State=UP DisableRootJobs=YES

#
# General partitions
#

PartitionName=normal \
    Default=YES \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=16000 \ # 16c/64-256GB, 20c/128GB
    PriorityTier=10 \
    PriorityJobFactor=10 \
    AllowQos=normal,long,system \
	    nodes=sh-02-[01-12],sh-03-[01-36],sh-04-[01-36],sh-06-[01-32],sh-101-[01-56]

PartitionName=bigmem \
    DefaultTime=2:0:0   MaxTime=1-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=53600 \ # 32c/512G-1.5TB, 56c/3TB
    PriorityTier=10 \
    PriorityJobFactor=100 \
    AllowQos=normal,system \
    QOS=bigmem \
        nodes=sh-02-[13-14],sh-112-[01-02]

PartitionName=dev \
    DefaultTime=1:0:0   MaxTime=0-2:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=8000 \  # 16c/128GB, 20c/128GB
    PriorityTier=10 \
    PriorityJobFactor=1000 \
    AllowQos=normal,system \
    QOS=dev \
	    nodes=sh-101-[57-58],sh-08-37,sh-06-[35-36]

PartitionName=gpu \
    DefaultTime=1:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=10 \
    PriorityJobFactor=100 \
    AllowQos=normal,system \
    QOS=gpu \
        nodes=sh-17-29,sh-09-[01-05],sh-112-[04-05],sh-113-[12-14]

PartitionName=test \
    DefMemPerCPU=4000   MaxMemPerCPU=6400 \  # 20c/64-128GB
    AllowGroups=sh_sysadm \
	    nodes=sh-101-[59-60],sh-06-[33-34],sh-09-06


#
# Owners partitions
#
# Condo model:
#   1. owners have exclusive access to their nodes, and can submit jobs to
#      them using "-p <partition_name>", where <partition_name> is usually the
#      PI's SUNet ID.
#   2. owners can also submit jobs to other owners' nodes, by using the "-p
#      owners" parameter. Those jobs will be preempted by the rightful owner's
#      own jobs, though. For instance, if ownerA submits jobs that run on
#      ownerB's nodes, and ownerB then submits jobs to his/her own nodes,
#      ownerA's jobs will be killed.
#   3. owners can still use the general pool of nodes to submit jobs.
#

# Partition QOS:
# If owner partitions have the same partition QOS, usage from all the
# partitions sharing the same QOS will be summed for limit considerations. This
# is actually fine since most users have access to a single owner partition
# anyway. For users who have access to several, that will prevent them to
# cumulate the limits from each partition.  See
# https://bugs.schedmd.com/show_bug.cgi?id=3849 for details


# -- 2014-06 --

PartitionName=diffenbaugh \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \ # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=omramom,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-01-[01-24]

# Center for Computational Earth & Environmental Science:
# http://cees.stanford.edu/
PartitionName=cees \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \ # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=biondo,beroza,sklemp,harrisgp,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-01-[25-26,32-34,36]

PartitionName=russpold \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \ # 16c/128GB, 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=russpold,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-01-[27-31],sh-02-[15-24],sh-07-21,sh-106-[01-04]

PartitionName=cbohon \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \ # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=cbohon,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-07-22

PartitionName=jhyoon1 \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \ # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jhyoon1,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-01-35

PartitionName=dpwall \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \ # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=dpwall,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-02-[25-34],sh-07-[02-20]

PartitionName=wolak \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \ # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=wolak,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-07-[23-24]


# -- 2014-10 --

PartitionName=rondror \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=32000 \ # 16c/64-512GB, 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=rondror,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-09-[07-10],sh-15-[01-08],sh-28-[01-02],sh-29-[01-08],sh-112-[13-17],sh-113-[01-03]


# -- 2014-12 --

# SLAC partition
#   KIPAC   https://kipac.stanford.edu/
#   SUNCAT  http://suncat.stanford.edu/
#   SIMES   http://simes.stanford.edu/
#   PULSE   https://ultrafast.stanford.edu/
PartitionName=iric \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=32000 \ # 16c/64GB, 48c/1.5TB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=suncat,kipac,simes,pulse,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-[10-12]-[01-36],sh-13-[01-29],sh-14-[01-09],sh-19-[01-08],sh-20-[01-35],sh-[21-24]-[01-36],sh-25-[01-33],sh-26-[01-31],sh-30-[01-36],sh-31-[01-10]


# -- 2015-01 --

PartitionName=rbaltman \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=16000 \ # 16c/64-256GB, 20c/256GB, 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=rbaltman,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-[01-11],sh-17-[14-19],sh-27-[25-32],sh-115-[01-02],sh-107-[05-08]

PartitionName=whwong \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=16000 \ # 16c/128-256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=whwong,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-[12-13,34-36],sh-26-[34-35]

# Statistics dept
# https://statistics.stanford.edu/
PartitionName=stat \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=16000 \ # 16c/128-256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=adembo,brajarat,candes,donoho,efron,gwalther,hastie,imj,jduchi,jtaylo,juliapr,lait,lavori,lmackey,owen,romano,sabatti,siegmund,souravc,sph,tibs,whwong,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-[14-16]

PartitionName=kornberg \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=8000  \ # 16c/64GB, 32c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=kornberg,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-[17-26],sh-17-[23-28]

PartitionName=manishad \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=8000 \  # 16c/64-128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=manishad,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-[27-28],sh-18-[29-30],sh-28-[06-07]


# -- 2015-02 --

PartitionName=horence \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=16000 \ # 16c/64-256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=horence,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-29,sh-28-04


# -- 2015-03 --

PartitionName=mcovert \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \ # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mcovert,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-08-[30-33]


# -- 2015-04 --

PartitionName=fkessler \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=fkessler,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-07-25


# -- 2015-05 --

# Civil & Environmental Engineering
# http://cee.stanford.edu
PartitionName=cee \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=8000 \ # 16c/64GB, 20c/128GB, 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=ggd,bakerjw,linder,fischer,billingt,borja,ask,law,mlepech,mime,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-07-[26-35],sh-27-[01-10],sh-104-[17-24],sh-107-[09-16]

# Mechanics and Computation
# http://mc.stanford.edu/Main_Page
PartitionName=mc \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=8000 \ # 16c/128GB, 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=darve,lewa,caiwei,ekuhl,pinsky,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-16-[04-08],sh-105-[05-12],sh-115-[07-08],sh-107-[41-48]


# -- 2015-06 --
# additions: rondror: sh-15-[01-08]

PartitionName=pande \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=16000 \ # 16c/256GB, 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=pande,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-15-[09-10],sh-102-[33-48]

PartitionName=djames \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=djames,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-16-[01-03]


# -- 2015-07 --

PartitionName=haiwang \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \ # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=haiwang,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-17-[01-08]


# -- 2015-09 --

# School of Humanities and Sciences
# https://humsci.stanford.edu/
PartitionName=hns \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=32000 \ # 16c/64-128GB, 20c/128-512GB, 24c/192GB, 48c/1.5TB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=sh_s-hns,sh_sysadm,kipac \  # ST 20180606 added kipac but might need fixing
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-17-12,sh-27-[11-21],sh-104-[49-72],sh-106-[13-36]
    #aauclert,abrunet1,adembo,alduy,amnorcia,arungc,ashbym,awagner,bblock,bernheim,bertozzi,bjlarsen,bmacint,boskin,brajarat,burchat,candes,carlsson,chetty,chidsey,cshatz,cy10,ddonald,deho,deleo,dmcfarla,donoho,doubleh,dpedulla,dpetrov,dreis,dsfisher,duffie,efron,evas,fayer,fejer,fukamit,gbarsh,gdaily,gentzkow,gjarosch,goldhab,gratta,gross,grusky,gwalther,haber,hadly,hartnoll,hastie,hbfraser,hmabuchi,hyo,iang,imj,irwin,jacksonm,jduchi,jfrydman,jhf,jhyoon1,jlg,jlmcc,jmc4,jp1,jrodden,jtaylo,juliapr,jzaki,kalanit,kangshen,khosla,kipac,kivelson,klenow,kmoler,knutson,kpeay,lait,leinav,lexing,llc,lluo,lmackey,loconnel,malgeehe,mcfrank,mcyert,memorten,mfeldman,mgduggan,mkanan,mschnitz,mwdenny,nbloom,nburns,ngoodman,noahr,ogozani,owen,pande,pdupas,phayden,piazzesi,pista,pkurlat,poulson,pritch,pwd,quake,ranabr,reininge,rfernald,rivers,rnz,romano,russpold,ruthm,sabatti,sblock,scheuer,schleier,dschneid,schu,sczhang,sebd,senatore,sganguli,siegmund,siyengar,solomone,souravc,spalumbi,sph,sshenker,stack,swa,tbres,tem26,theinz,tibs,tomz,torche,tulja,vfouka,vitousek,wandell,waymouth,wenderp,whwong,wmoerner,wolak,xgzhou,xkchen,yamins,yanx,youngsl,zfrank,zxshen,sh_sysadm \


# -- 2015-10 --
# additions: kornberg: sh-17-[23-28]

PartitionName=amarsden \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000  \ # 24c/96GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=amarsden,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-18-[01-10]

PartitionName=euan \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=8000  \ # 16c/128GB, 20c/128GB, 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=euan,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-17-[09-11],sh-113-15,sh-107-[29-32]

PartitionName=jduchi \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jduchi,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-17-13

# BioChem
# http://biochemistry.stanford.edu/
PartitionName=biochem \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=8000 \ # 16c/64GB, 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=wjg,herschla,rhiju,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-17-[20-22],sh-107-[17-20,23]


# -- 2016-01 --

PartitionName=hbfraser \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=8000 \  # 16c/64-128GB, 24c/192-512GB (..)
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=hbfraser,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-18-[11-24],sh-106-[53-56]

PartitionName=agitler \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \  # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=agitler,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-28-03

# IBIIS
# http://ibiis.stanford.edu/
PartitionName=ibiis \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=langlotz,plevriti,rubin,snapel,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-27-35

PartitionName=jonfan \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \  # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jonfan,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-28-05


# -- 2016-02 --

PartitionName=jianq \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=6400 \  # 16c/64GB, 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jianq,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-18-[25-26],sh-102-[11-12],sh-105-[15-16],sh-107-[49-52]

PartitionName=delp \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \  # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=delp,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-18-27

PartitionName=msalit \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \  # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=msalit,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-18-28


# -- 2016-03 --
# additions: whwong: sh-26-[34-35]

PartitionName=brunger \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=16000 \ # 16c/256GB, 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=brunger,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-18-[31-35],sh-102-[13-16],sh-104-[01-16],sh-113-[06-07],sh-115-06

PartitionName=lmackey \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=lmackey,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-26-[32-33]


# -- 2016-04 --

PartitionName=spalumbi \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=spalumbi,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-26-36


# -- 2016-06  --

PartitionName=eriking \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=12800 \ # 16c/128GB, 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=eriking,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-27-22,sh-105-[13-14]

PartitionName=dpetrov \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=4000   MaxMemPerCPU=4000 \  # 16c/64GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=dpetrov,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-27-[23-24]

PartitionName=pelc \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000 \  # 16c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=pelc,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-27-[33-34]


# -- 2016-09 --

PartitionName=phn  \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=phn,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-28-09

PartitionName=dschneid  \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=dschneid,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-28-08


# -- 2016-12 --

PartitionName=pritch \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=16000 \ # 20c/128-256GB, 24c/384GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=pritch,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-28-[11-12],sh-101-[61-72],sh-106-[37-52]

PartitionName=yamins  \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 16c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=yamins,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-28-10



# -- 2017-03 --
# additions: pritch:  sh-101-[61-72]
#            brunger: sh-102-[13-16],sh-104-[01-16],sh-113-[06-07]

PartitionName=candes \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=19200 \ # 20c/128-256GB, 24c/192-384GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=candes,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-[01-02,05-06],sh-105-[21-24],sh-107-[25-28]

PartitionName=casco \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=casco,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-03

PartitionName=drehkopf \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=drehkopf,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-04

PartitionName=mrivas \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mrivas,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-07

PartitionName=gross \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=gross,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-08

PartitionName=possu \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=possu,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-[17-21]

PartitionName=jpriest \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jpriest,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-22,sh-114-08

# Nanoelectronics group
# http://nano.stanford.edu
PartitionName=nano \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=epop,hspwong,nishiy,saraswat,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-[23-24]

PartitionName=menon \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=menon,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-[25-26],sh-107-[37-38]

PartitionName=klposton \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=klposton,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-27

PartitionName=arend \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=48000  MaxMemPerCPU=48000 \ # 32c/1.5TB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=arend,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-112-03


# -- 2017-04 --
# additions: jianq:  sh-102-[11-12]
#            pande:  sh-102-[33-48]

PartitionName=jp1 \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=25600  MaxMemPerCPU=25600 \ # 20c/512GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jp1,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-09

PartitionName=aetkin \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=aetkin,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-10

PartitionName=akundaje \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=25600 \ # 20c/256-512GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=akundaje,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=akundaje \
        nodes=sh-102-[28-32],sh-112-[06-11]

PartitionName=suncat \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=suncat,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-102-[49-72]

PartitionName=simes \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=8000  \ # 20c/128GB, 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=simes,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-103-[01-36]


# -- 2017-05 --
# additions: akundaje: sh-112-[06-07]
#            brunger : sh-104-[01-16]
#            cee     : sh-104-[17-24]

PartitionName=quake \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=quake,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-104-[25-28]

PartitionName=khavari \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=khavari,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-104-[29-32]

PartitionName=howchang \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=howchang,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-104-[33-36]

PartitionName=evanreed \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=evanreed,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-104-[37-46]

PartitionName=mvperez \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mvperez,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-104-47

PartitionName=mschnitz \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mschnitz,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-104-48


# -- 2017-06 --
# additions: brunger: sh-113-[06-07]

PartitionName=ljinhy \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=ljinhy,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-112-12


# -- 2017-07 --
# additions: akundaje: sh-112-[08-11]


# -- 2017-08 --
# additions: rondror: sh-112-[13-17],sh-113-[01-03]
#            hns:     sh-104-[49-72]
#            mc:      sh-105-[05-12]
#            eriking: sh-105-[13-14]

PartitionName=konings \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=konings,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-[01-04]

PartitionName=donoho \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=donoho,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-[17-19],sh-113-08

PartitionName=stuartkm \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=stuartkm,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-20

# additions: jianq:  sh-105-[15-16]
#            candes: sh-105-[21-24]

PartitionName=aaiken \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=aaiken,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-[25-28],sh-114-[01-04]

PartitionName=slqi \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 32c/512GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=slqi,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-113-09

PartitionName=yiorgo \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=51200 \ # 20c/512GB-1TB, 24c/129GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=yiorgo,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-113-[10-11],sh-114-[09-10,12-15],sh-106-[57-72],sh-107-[01-03]


# -- 2017-09 --
# additions: aaiken:  sh-114-[01-04]


# -- 2017-10 --

PartitionName=sfgf \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=25600 \ # 20c/256-512GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jcoller,hanleeji,arasha,wjg,howchang,hellers,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-[29-68],sh-114-[05-06]


# -- 2018-01 --
# additions: jpriest: sh-114-08

PartitionName=kobilka \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=kobilka,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-113-[04-05]

PartitionName=oro \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=oro,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-69

PartitionName=gentzkow \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=gentzkow,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-70

PartitionName=jamesz \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=jamesz,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-114-07


# -- 2018-02 --
# additions: yiorgo:  sh-114-[09-10]


# -- 2018-03 --

PartitionName=fmcnich \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=6400  \ # 20c/128GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=fmcnich,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-71

PartitionName=andrewg \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=6400   MaxMemPerCPU=16000 \ # 20c/128-256GB, 24c/384GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=andrewg,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-105-72,sh-107-21,sh-115-05

PartitionName=mignot \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=12800  MaxMemPerCPU=12800 \ # 20c/256GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mignot,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-114-11


# -- 2018-04 --
# additions: russpold: sh-106-[01-04]
#            hns:      sh-106-[13-36]
#            pritch:   sh-106-[37-52]
#            hbfraser: sh-106-[53-54]

PartitionName=rzia \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=rzia,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-106-[05-12]


# -- 2018-05 --
# additions: yiorgo: sh-106-[57-72]


# -- 2018-06 --
# additions: rbaltman: sh-115-[01-02],sh-107-[05-08]
#            euan:     sh-113-15
#            yiorgo:   sh-114-12,sh-107-[01-03]
#            andrewg:  sh-107-21
#            cee:      sh-107-[09-16]
#            biochem:  sh-107-[17-20,23]

PartitionName=puglisi \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=25600  MaxMemPerCPU=25600  \ # 20c/512GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=puglisi,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-115-03

PartitionName=skachru \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=25600  MaxMemPerCPU=25600  \ # 20c/512GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=skachru,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-115-04

PartitionName=fejer \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=fejer,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-04

PartitionName=mzeineh \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=16000  MaxMemPerCPU=16000 \ # 24c/384GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mzeineh,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-22

PartitionName=mfeldman \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=mfeldman,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-24


# -- 2018-07 --
# additions: candes:  sh-107-[25-28]
#            andrewg: sh-115-05


# -- 2018-08 --
# additions: euan:    sh-107-[29-32]
#            brunger: sh-115-06
#            yiorgo:  sh-114-[13-15]

PartitionName=trc \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=trc,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-[33-34]

PartitionName=baccus \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=baccus,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-35

PartitionName=giocomo \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=giocomo,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-36


# -- 2018-10 --
# additions: mc:      sh-115-[07-08]
#            menon:   sh-107-[37-38]
#            mc:      sh-107-[41-48]
#            simes:   sh-103-[25-36]
#            jianq:   sh-107-[49-52]

PartitionName=awagner \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=awagner,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-39

PartitionName=iang \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=iang,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-40


# -- 2018-11 --

PartitionName=willhies \
    DefaultTime=2:0:0   MaxTime=7-0:0:0 \
    DefMemPerCPU=8000   MaxMemPerCPU=8000  \ # 24c/192GB
    PriorityTier=1000 \
    PriorityJobFactor=10000 \
    AllowGroups=willhies,sh_sysadm \
    AllowQos=normal,high_p,system \
    QOS=owner \
        nodes=sh-107-[53-56]



# catch-all partition for all owners nodes
PartitionName=owners \
    DefaultTime=2:0:0   MaxTime=2-0:0:0    \
    DefMemPerCPU=4000   MaxMemPerCPU=48000 \ # mixed memory amounts
    PriorityTier=1 \    # lowest priority for preemptable partition
    GraceTime=15 \      # 15s grace period for preempted jobs
    AllowGroups=sys,adembo,amarsden,ask,bakerjw,billingt,borja,brajarat,caiwei,candes,cbohon,darve,djames,donoho,dpwall,efron,ekuhl,euan,fischer,fkessler,ggd,gwalther,haiwang,hastie,herschla,horence,imj,jduchi,jhyoon1,jtaylo,kornberg,lait,lavori,law,lewa,lexing,linder,lmackey,manishad,mcovert,mime,mlepech,suncat,omramom,owen,pande,pinsky,rbaltman,rhiju,romano,rondror,russpold,ruthm,sabatti,siegmund,souravc,sph,sys,kipac,tibs,pulse,simes,whwong,wjg,wolak,chetty,hbfraser,jianq,delp,msalit,brunger,spalumbi,eriking,dpetrov,pelc,langlotz,plevriti,rubin,snapel,agitler,jonfan,dschneid,phn,yamins,pritch,mrivas,drehkopf,casco,gross,possu,jpriest,epop,hspwong,nishiy,saraswat,menon,klposton,arend,jp1,aetkin,akundaje,quake,khavari,howchang,evanreed,mvperez,mschnitz,ljinhy,konings,stuartkm,aaiken,slqi,yiorgo,kobilka,oro,gentzkow,jamesz,fmcnich,andrewg,mignot,rzia,puglisi,skachru,fejer,mzeineh,mfeldman,trc,baccus,giocomo,awagner,iang,willhies \
    AllowQos=normal,system \
    QOS=owners \
        nodes=sh-01-[01-36],sh-02-[15-34],sh-07-[02-35],sh-08-[01-36],sh-09-[07-10],sh-[10-12]-[01-36],sh-13-[01-29],sh-14-[01-09],sh-15-[01-10],sh-16-[01-08],sh-17-[01-28],sh-18-[01-35],sh-19-[01-08],sh-20-[01-35],sh-[21-24]-[01-36],sh-25-[01-33],sh-26-[01-36],sh-27-[01-35],sh-28-[01-12],sh-29-[01-08],sh-30-[01-36],sh-31-[01-10],sh-101-[61-72],sh-102-[01-72],sh-103-[01-36],sh-104-[01-72],sh-105-[01-72],sh-106-[01-72],sh-107-[01-56],sh-112-[03,06-17],sh-113-[01-11,15],sh-114-[01-15],sh-115-[01-08]
